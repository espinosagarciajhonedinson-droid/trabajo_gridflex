<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Timeline - Jhon</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- HEADER CON BÃšSQUEDA -->
    <header class="header">
        <div class="header-container">
            <div class="logo">
                <h1>ğŸ“± Social Network</h1>
            </div>
            <div class="search-bar">
                <input type="text" placeholder="ğŸ” Buscar..." class="search-input">
            </div>
            <div class="header-icons">
                <button class="icon-btn" id="notificationBtn">ğŸ””<span class="notification-badge" id="notificationBadge" style="display: none;">3</span></button>
                <button class="icon-btn" id="messageBtn">ğŸ’¬<span class="notification-badge" id="messageBadge" style="display: none;">2</span></button>
                <button class="icon-btn" id="profileIconBtn">ğŸ‘¤</button>
            </div>
        </div>
    </header>

    <!-- CONTENEDOR PRINCIPAL -->
    <div class="main-container">
        <!-- SIDEBAR IZQUIERDO - NAVEGACIÃ“N -->
        <aside class="sidebar-left" role="navigation">
            <div class="menu-section">
                <h3>Mi MenÃº</h3>
                <ul class="menu-list">
                    <li><a href="#" class="menu-item active">ğŸ“° Inicio</a></li>
                    <li><a href="#" class="menu-item">ğŸ‘¥ Amigos</a></li>
                    <li><a href="#" class="menu-item">ğŸ“¸ Fotos</a></li>
                    <li><a href="#" class="menu-item">ğŸ’¾ Guardados</a></li>
                    <li><a href="#" class="menu-item">âš™ï¸ ConfiguraciÃ³n</a></li>
                </ul>
            </div>

            <div class="menu-section">
                <h3>Comunidades</h3>
                <ul class="menu-list">
                    <li><a href="#" class="menu-item">ğŸ® Gaming</a></li>
                    <li><a href="#" class="menu-item">ğŸ‹ï¸ Fitness</a></li>
                    <li><a href="#" class="menu-item">ğŸ• Comida</a></li>
                    <li><a href="#" class="menu-item">âœˆï¸ Viajes</a></li>
                </ul>
            </div>
        </aside>

        <!-- CONTENIDO PRINCIPAL - FEED -->
        <main class="feed">
            <!-- CREAR POST -->
            <div class="create-post">
                <div class="user-profile">
                    <img src="imagenes/WhatsApp Image 2026-02-09 at 19.18.27.jpeg" alt="Tu perfil" class="profile-pic clickable-image" data-user="Jhon Espinosa" data-bio="Desarrollador Web" style="cursor: pointer;">
                    <input type="text" placeholder="Â¿En quÃ© estÃ¡s pensando?" class="post-input" id="postText">
                </div>
                <div class="post-actions">
                    <button class="post-btn" id="cameraBtn" title="Abrir cÃ¡mara">ğŸ“· Foto</button>
                    <button class="post-btn" id="galleryBtn" title="Subir archivo">ğŸ¨ GalerÃ­a</button>
                    <button class="post-btn" id="publishBtn" title="Publicar post">ğŸ“¤ Publicar</button>
                </div>
                <input type="file" id="galleryInput" accept="image/*" style="display: none;">
            </div>

            <!-- POST 1 -->
            <article class="post" data-post-id="1" data-likes="234">
                <div class="post-header">
                    <img src="imagenes/WhatsApp Image 2026-02-09 at 19.18.27.jpeg" alt="Usuario" class="profile-pic-small clickable-profile" data-user="Jhon Espinosa" data-bio="Desarrollador Web">
                    <div class="post-info">
                        <h4 class="clickable-profile-name" data-user="Jhon Espinosa">Jhon Espinosa</h4>
                    </div>
                    <span class="post-menu">â‹¯</span>
                </div>
                
                <div class="post-content">
                    <p>Â¡Hoy fue un excelente dÃ­a de desarrollo! Acabo de terminar un proyecto con Grid y Flexbox. Â¿QuÃ© dicen ustedes de las nuevas tÃ©cnicas de CSS?</p>
                </div>

                <img src="imagenes/posts/post1.jpg" alt="Contenido del post" class="post-image clickable-image">

                <div class="post-stats">
                    <span class="like-count">ğŸ‘ 234 me gusta</span>
                    <span class="comment-count">ğŸ’¬ 45 comentarios</span>
                    <span>â†—ï¸ 12 compartidos</span>
                </div>

                <div class="post-actions-footer">
                    <button class="action-btn like-btn" data-liked="false">ğŸ‘ Me gusta</button>
                    <button class="action-btn comment-btn">ğŸ’¬ Comentar</button>
                    <button class="action-btn">â†—ï¸ Compartir</button>
                </div>

                <!-- COMENTARIOS (colapsible) -->
                <div class="comments-section" style="display: none;">
                    <div class="comment">
                        <img src="imagenes/avatars/user2.jpg" alt="Comentario" class="comment-pic">
                        <div class="comment-content">
                            <strong>Ana MarÃ­a</strong>
                            <p>Â¡Excelente trabajo! CSS ha evolucionado mucho.</p>
                            <span class="comment-time">hace 1 hora</span>
                        </div>
                    </div>
                    <div class="comment">
                        <img src="imagenes/avatars/user3.jpg" alt="Comentario" class="comment-pic">
                        <div class="comment-content">
                            <strong>Carlos</strong>
                            <p>Me encanta cÃ³mo se ve. Â¿CuÃ¡l es tu fuente favorita?</p>
                            <span class="comment-time">hace 45 min</span>
                        </div>
                    </div>
                </div>

                <div class="comment-input">
                    <img src="imagenes/WhatsApp Image 2026-02-09 at 19.18.27.jpeg" alt="Tu foto" class="comment-pic">
                    <input type="text" placeholder="Escribe un comentario..." class="comment-field" data-post="1">
                </div>
            </article>

            <!-- POST 2 -->
            <article class="post" data-post-id="2" data-likes="512">
                <div class="post-header">
                    <img src="imagenes/avatars/user4.jpg" alt="Usuario" class="profile-pic-small clickable-profile" data-user="MarÃ­a GonzÃ¡lez" data-bio="DiseÃ±adora Web">
                    <div class="post-info">
                        <h4 class="clickable-profile-name" data-user="MarÃ­a GonzÃ¡lez">MarÃ­a GonzÃ¡lez</h4>
                        <span class="post-time">hace 4 horas</span>
                    </div>
                    <span class="post-menu">â‹¯</span>
                </div>
                
                <div class="post-content">
                    <p>Â¡Compartiendo algunos consejos sobre diseÃ±o responsivo! ğŸ¨</p>
                </div>
                <img src="imagenes/posts/post2.jpg" alt="DiseÃ±o responsivo" class="post-image clickable-image">

                <div class="post-stats">
                    <span class="like-count">ğŸ‘ 512 me gusta</span>
                    <span class="comment-count">ğŸ’¬ 89 comentarios</span>
                    <span>â†—ï¸ 45 compartidos</span>
                </div>

                <div class="post-actions-footer">
                    <button class="action-btn like-btn" data-liked="false">ğŸ‘ Me gusta</button>
                    <button class="action-btn comment-btn">ğŸ’¬ Comentar</button>
                    <button class="action-btn">â†—ï¸ Compartir</button>
                </div>

                <div class="comments-section" style="display: none;">
                    <div class="comment">
                        <img src="imagenes/avatars/user1.jpg" alt="Comentario" class="comment-pic">
                        <div class="comment-content">
                            <strong>Jhon Espinosa</strong>
                            <p>DiseÃ±o excelente, muy profesional.</p>
                            <span class="comment-time">hace 2 horas</span>
                        </div>
                    </div>
                </div>

                <div class="comment-input">
                    <img src="imagenes/WhatsApp Image 2026-02-09 at 19.18.27.jpeg" alt="Tu foto" class="comment-pic">
                    <input type="text" placeholder="Escribe un comentario..." class="comment-field" data-post="2">
                </div>
            </article>

            <!-- POST 3 -->
            <article class="post" data-post-id="3" data-likes="1200">
                <div class="post-header">
                    <img src="imagenes/avatars/user5.jpg" alt="Usuario" class="profile-pic-small clickable-profile" data-user="Pedro RodrÃ­guez" data-bio="Desarrollador Full Stack">
                    <div class="post-info">
                        <h4 class="clickable-profile-name" data-user="Pedro RodrÃ­guez">Pedro RodrÃ­guez</h4>
                        <span class="post-time">hace 6 horas</span>
                    </div>
                    <span class="post-menu">â‹¯</span>
                </div>
                
                <div class="post-content">
                    <p>Les presento mi nuevo proyecto: Una plataforma de aprendizaje con Grid y Flexbox. El cÃ³digo es limpio y responsivo. Â¿QuÃ© les parece?</p>
                </div>

                <img src="imagenes/posts/post3.jpg" alt="Proyecto" class="post-image clickable-image">

                <div class="post-stats">
                    <span class="like-count">ğŸ‘ 1.2K me gusta</span>
                    <span class="comment-count">ğŸ’¬ 234 comentarios</span>
                    <span>â†—ï¸ 567 compartidos</span>
                </div>

                <div class="post-actions-footer">
                    <button class="action-btn like-btn" data-liked="false">ğŸ‘ Me gusta</button>
                    <button class="action-btn comment-btn">ğŸ’¬ Comentar</button>
                    <button class="action-btn">â†—ï¸ Compartir</button>
                </div>

                <div class="comments-section" style="display: none;">
                    <div class="comment">
                        <img src="imagenes/avatars/user2.jpg" alt="Comentario" class="comment-pic">
                        <div class="comment-content">
                            <strong>Ana MarÃ­a</strong>
                            <p>Proyecto impresionante! Me encantarÃ­a ver el cÃ³digo.</p>
                            <span class="comment-time">hace 1 hora</span>
                        </div>
                    </div>
                </div>

                <div class="comment-input">
                    <img src="imagenes/WhatsApp Image 2026-02-09 at 19.18.27.jpeg" alt="Tu foto" class="comment-pic">
                    <input type="text" placeholder="Escribe un comentario..." class="comment-field" data-post="3">
                </div>
            </article>

            <!-- POST 4 -->
            <article class="post" data-post-id="4" data-likes="789">
                <div class="post-header">
                    <img src="imagenes/avatars/user6.jpg" alt="Usuario" class="profile-pic-small clickable-profile" data-user="Laura MartÃ­nez" data-bio="Especialista en UX/UI">
                    <div class="post-info">
                        <h4 class="clickable-profile-name" data-user="Laura MartÃ­nez">Laura MartÃ­nez</h4>
                        <span class="post-time">hace 8 horas</span>
                    </div>
                    <span class="post-menu">â‹¯</span>
                </div>
                
                <div class="post-content">
                    <p>Â¡Nuevo dÃ­a, nuevas oportunidades! ğŸ’ª Trabajando en mejorar mis habilidades en CSS Grid.</p>
                </div>
                <img src="imagenes/posts/post4.jpg" alt="DÃ­a de trabajo" class="post-image clickable-image">

                <div class="post-stats">
                    <span class="like-count">ğŸ‘ 789 me gusta</span>
                    <span class="comment-count">ğŸ’¬ 123 comentarios</span>
                    <span>â†—ï¸ 234 compartidos</span>
                </div>

                <div class="post-actions-footer">
                    <button class="action-btn like-btn" data-liked="false">ğŸ‘ Me gusta</button>
                    <button class="action-btn comment-btn">ğŸ’¬ Comentar</button>
                    <button class="action-btn">â†—ï¸ Compartir</button>
                </div>

                <div class="comments-section" style="display: none;">
                    <div class="comment">
                        <img src="imagenes/avatars/user3.jpg" alt="Comentario" class="comment-pic">
                        <div class="comment-content">
                            <strong>Carlos</strong>
                            <p>Â¡Eso es! Nunca dejes de aprender ğŸš€</p>
                            <span class="comment-time">hace 3 horas</span>
                        </div>
                    </div>
                </div>

                <div class="comment-input">
                    <img src="imagenes/WhatsApp Image 2026-02-09 at 19.18.27.jpeg" alt="Tu foto" class="comment-pic">
                    <input type="text" placeholder="Escribe un comentario..." class="comment-field" data-post="4">
                </div>
            </article>
        </main>

        <!-- SIDEBAR DERECHO - WIDGETS -->
        <aside class="sidebar-right" role="complementary">
            <!-- SUGERENCIAS -->
            <div class="widget-box">
                <h3 class="widget-title">ğŸ‘¥ Sugerencias de amigos</h3>
                <div class="suggestion" data-friend-id="1" data-friend-name="Diego LÃ³pez" data-friend-image="imagenes/avatars/user1.jpg" data-friend-bio="DiseÃ±ador de interfaces">
                    <img src="imagenes/avatars/user1.jpg" alt="Sugerencia" class="suggestion-pic">
                    <div class="suggestion-info">
                        <h5>Diego LÃ³pez</h5>
                        <p>5 amigos en comÃºn</p>
                    </div>
                    <button class="add-btn add-friend-btn" data-friend-id="1">+</button>
                </div>
                <div class="suggestion" data-friend-id="5" data-friend-name="Sofia Ruiz" data-friend-image="imagenes/avatars/user5.jpg" data-friend-bio="Especialista en marketing">
                    <img src="imagenes/avatars/user5.jpg" alt="Sugerencia" class="suggestion-pic">
                    <div class="suggestion-info">
                        <h5>Sofia Ruiz</h5>
                        <p>12 amigos en comÃºn</p>
                    </div>
                    <button class="add-btn add-friend-btn" data-friend-id="5">+</button>
                </div>
                <div class="suggestion" data-friend-id="7" data-friend-name="Juan PÃ©rez" data-friend-image="imagenes/avatars/user7.jpg" data-friend-bio="Desarrollador Backend">
                    <img src="imagenes/avatars/user7.jpg" alt="Sugerencia" class="suggestion-pic">
                    <div class="suggestion-info">
                        <h5>Juan PÃ©rez</h5>
                        <p>8 amigos en comÃºn</p>
                    </div>
                    <button class="add-btn add-friend-btn" data-friend-id="7">+</button>
                </div>
            </div>

            <!-- EVENTOS -->
            <div class="widget-box">
                <h3 class="widget-title">ğŸ“… Eventos PrÃ³ximos</h3>
                <div class="event">
                    <span class="event-date">FEB 15</span>
                    <div class="event-info">
                        <h5>Conferencia de Web Design</h5>
                        <p>8:00 PM</p>
                    </div>
                </div>
                <div class="event">
                    <span class="event-date">FEB 20</span>
                    <div class="event-info">
                        <h5>Meetup de Desarrolladores</h5>
                        <p>6:30 PM</p>
                    </div>
                </div>
                <div class="event">
                    <span class="event-date">FEB 25</span>
                    <div class="event-info">
                        <h5>Hackathon CSS Challenge</h5>
                        <p>10:00 AM</p>
                    </div>
                </div>
            </div>

            <!-- PUBLICIDAD -->
            <div class="widget-box ad">
                <div class="ad-content">
                    <h4>ğŸš€ Curso Premium</h4>
                    <p>Aprende CSS avanzado en 30 dÃ­as</p>
                    <button class="ad-btn">Conocer mÃ¡s</button>
                </div>
            </div>

            <!-- ENLACE RÃPIDO -->
            <div class="widget-box">
                <h3 class="widget-title">ğŸ”— Enlaces RÃ¡pidos</h3>
                <a href="#" class="quick-link">ğŸ“š DocumentaciÃ³n</a>
                <a href="#" class="quick-link">ğŸ’» Tutoriales</a>
                <a href="#" class="quick-link">ğŸ“ Recursos</a>
                <a href="#" class="quick-link">â“ Preguntas</a>
            </div>
        </aside>
    </div>

    <!-- FOOTER -->
    <footer class="footer">
        <p>&copy; 2026 Social Network - Jhon Espinosa</p>
        <p>Construido con Grid | Flexbox | Float | Responsive Design</p>
    </footer>

    <!-- MODAL PERFIL -->
    <div id="profileModal" class="profile-modal">
        <div class="profile-modal-content">
            <span class="profile-close">&times;</span>
            <div class="profile-header">
                <img id="profileImage" src="imagenes/WhatsApp Image 2026-02-09 at 19.18.27.jpeg" alt="Perfil" class="profile-modal-pic">
                <div class="profile-details">
                    <h2 id="profileName">Jhon Espinosa</h2>
                    <p id="profileBio">Desarrollador Web | Entusiasta de CSS</p>
                    <div class="profile-stats">
                        <div class="stat">
                            <strong id="postCount">0</strong>
                            <span>Posts</span>
                        </div>
                        <div class="stat">
                            <strong id="followerCount">0</strong>
                            <span>Seguidores</span>
                        </div>
                        <div class="stat">
                            <strong id="followingCount">0</strong>
                            <span>Siguiendo</span>
                        </div>
                    </div>
                </div>
            </div>
            <button class="profile-action-btn">Seguir</button>
        </div>
    </div>

    <!-- MODAL CÃMARA -->
    <div id="cameraModal" class="camera-modal">
        <div class="camera-container">
            <span class="camera-close">&times;</span>
            <h3>ğŸ“· Capturar Foto</h3>
            <div class="camera-wrapper">
                <video id="cameraStream" autoplay playsinline></video>
                <canvas id="photoCanvas" style="display: none;"></canvas>
            </div>
            <div class="camera-controls">
                <button id="captureBtn" class="camera-btn capture-btn">ğŸ“¸ Capturar</button>
                <button id="retakeBtn" class="camera-btn retake-btn" style="display: none;">ğŸ”„ Reintentar</button>
                <button id="usePhotoBtn" class="camera-btn use-btn" style="display: none;">âœ“ Usar Foto</button>
            </div>
        </div>
    </div>

    <!-- MODAL LIGHTBOX -->
    <div id="imageModal" class="modal">
        <span class="modal-close">&times;</span>
        <img class="modal-image" src="" alt="Imagen ampliada">
        <div class="modal-nav">
            <button class="modal-prev">â® Anterior</button>
            <button class="modal-next">Siguiente â¯</button>
        </div>
    </div>

    <!-- MODAL NOTIFICACIONES -->
    <div id="notificationModal" class="notification-modal">
        <div class="notification-modal-content">
            <div class="notification-header">
                <h3>ğŸ”” Notificaciones</h3>
                <span class="notification-close">&times;</span>
            </div>
            <div class="notification-list" id="notificationList">
                <div class="notification-item">
                    <img src="imagenes/avatars/user1.jpg" alt="Usuario">
                    <div class="notification-text">
                        <strong>Ana MarÃ­a</strong>
                        <p>le gustÃ³ tu foto</p>
                        <span class="notification-time">hace 5 minutos</span>
                    </div>
                </div>
                <div class="notification-item">
                    <img src="imagenes/avatars/user2.jpg" alt="Usuario">
                    <div class="notification-text">
                        <strong>Carlos LÃ³pez</strong>
                        <p>comentÃ³ en tu post</p>
                        <span class="notification-time">hace 1 hora</span>
                    </div>
                </div>
                <div class="notification-item">
                    <img src="imagenes/avatars/user3.jpg" alt="Usuario">
                    <div class="notification-text">
                        <strong>MarÃ­a FernÃ¡ndez</strong>
                        <p>empezÃ³ a seguirte</p>
                        <span class="notification-time">hace 2 horas</span>
                    </div>
                </div>
            </div>
            <button class="clear-notifications-btn">Limpiar notificaciones</button>
        </div>
    </div>

    <!-- MODAL MENSAJES -->
    <div id="messageModal" class="message-modal">
        <div class="message-modal-content">
            <div class="message-header">
                <h3>ğŸ’¬ Mensajes</h3>
                <span class="message-close">&times;</span>
            </div>
            <div class="message-list" id="messageList">
                <div class="message-thread" data-user-id="1">
                    <img src="imagenes/avatars/user1.jpg" alt="Usuario">
                    <div class="message-preview">
                        <strong>Ana MarÃ­a</strong>
                        <p>Â¿CÃ³mo estÃ¡s? Â¿Vamos al cine?</p>
                    </div>
                </div>
                <div class="message-thread" data-user-id="2">
                    <img src="imagenes/avatars/user2.jpg" alt="Usuario">
                    <div class="message-preview">
                        <strong>Carlos LÃ³pez</strong>
                        <p>Genial tu Ãºltima foto</p>
                    </div>
                </div>
            </div>
            <div class="message-compose">
                <input type="text" id="messageInput" placeholder="Escribe un mensaje..." class="message-input">
                <button id="sendMessageBtn" class="send-message-btn">ğŸ“¤ Enviar</button>
            </div>
        </div>
    </div>

    <!-- MODAL CHAT INDIVIDUAL -->
    <div id="chatModal" class="chat-modal">
        <div class="chat-modal-content">
            <div class="chat-header">
                <img id="chatUserImage" src="" alt="Usuario" class="chat-user-image">
                <h3 id="chatUserName">Usuario</h3>
                <span class="chat-close">&times;</span>
            </div>
            <div class="chat-messages" id="chatMessages"></div>
            <div class="chat-input-area">
                <input type="text" id="chatInput" placeholder="Escribe un mensaje..." class="chat-input">
                <button id="sendChatBtn" class="send-chat-btn">ğŸ“¤</button>
            </div>
        </div>
    </div>

    <!-- MODALES DEL MENÃš -->
    
    <!-- MODAL AMIGOS -->
    <div id="friendsModal" class="menu-modal">
        <div class="menu-modal-content">
            <div class="menu-modal-header">
                <h2>ğŸ‘¥ Mis Amigos</h2>
                <span class="menu-modal-close" onclick="closeMenuModal('friendsModal')">&times;</span>
            </div>
            <div class="menu-modal-body" id="friendsList">
                <div class="friend-item" data-friend-id="2">
                    <img src="imagenes/avatars/user2.jpg" alt="Ana MarÃ­a">
                    <div class="friend-info">
                        <h4>Ana MarÃ­a</h4>
                        <p>Desarrolladora Frontend</p>
                    </div>
                    <button class="friend-action-btn">Ver perfil</button>
                </div>
                <div class="friend-item" data-friend-id="3">
                    <img src="imagenes/avatars/user3.jpg" alt="Carlos">
                    <div class="friend-info">
                        <h4>Carlos LÃ³pez</h4>
                        <p>DiseÃ±ador GrÃ¡fico</p>
                    </div>
                    <button class="friend-action-btn">Ver perfil</button>
                </div>
                <div class="friend-item" data-friend-id="4">
                    <img src="imagenes/avatars/user4.jpg" alt="MarÃ­a">
                    <div class="friend-info">
                        <h4>MarÃ­a GonzÃ¡lez</h4>
                        <p>DiseÃ±adora Web</p>
                    </div>
                    <button class="friend-action-btn">Ver perfil</button>
                </div>
                <div class="friend-item" data-friend-id="5">
                    <img src="imagenes/avatars/user5.jpg" alt="Pedro">
                    <div class="friend-info">
                        <h4>Pedro RodrÃ­guez</h4>
                        <p>Desarrollador Full Stack</p>
                    </div>
                    <button class="friend-action-btn">Ver perfil</button>
                </div>
                <div class="friend-item" data-friend-id="6">
                    <img src="imagenes/avatars/user6.jpg" alt="Laura">
                    <div class="friend-info">
                        <h4>Laura MartÃ­nez</h4>
                        <p>Especialista en UX/UI</p>
                    </div>
                    <button class="friend-action-btn">Ver perfil</button>
                </div>
                <div class="friend-item" data-friend-id="7">
                    <img src="imagenes/avatars/user7.jpg" alt="Juan">
                    <div class="friend-info">
                        <h4>Juan PÃ©rez</h4>
                        <p>Desarrollador Backend</p>
                    </div>
                    <button class="friend-action-btn">Ver perfil</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL FOTOS -->
    <div id="photosModal" class="menu-modal">
        <div class="menu-modal-content">
            <div class="menu-modal-header">
                <h2>ğŸ“¸ Mis Fotos</h2>
                <span class="menu-modal-close" onclick="closeMenuModal('photosModal')">&times;</span>
            </div>
            <div class="menu-modal-body photo-gallery">
                <img src="imagenes/posts/post1.jpg" alt="Foto 1" class="gallery-photo clickable-image">
                <img src="imagenes/posts/post2.jpg" alt="Foto 2" class="gallery-photo clickable-image">
                <img src="imagenes/posts/post3.jpg" alt="Foto 3" class="gallery-photo clickable-image">
                <img src="imagenes/posts/post4.jpg" alt="Foto 4" class="gallery-photo clickable-image">
            </div>
        </div>
    </div>

    <!-- MODAL GUARDADOS -->
    <div id="savedModal" class="menu-modal">
        <div class="menu-modal-content">
            <div class="menu-modal-header">
                <h2>ğŸ’¾ Posts Guardados</h2>
                <span class="menu-modal-close" onclick="closeMenuModal('savedModal')">&times;</span>
            </div>
            <div class="menu-modal-body saved-posts">
                <div class="saved-post-item">
                    <img src="imagenes/posts/post1.jpg" alt="Post guardado 1">
                    <div class="saved-post-info">
                        <h4>Â¡Hoy fue un excelente dÃ­a de desarrollo!</h4>
                        <p>Guardado hace 2 dÃ­as</p>
                    </div>
                </div>
                <div class="saved-post-item">
                    <img src="imagenes/posts/post2.jpg" alt="Post guardado 2">
                    <div class="saved-post-info">
                        <h4>Â¡Compartiendo consejos de diseÃ±o responsivo!</h4>
                        <p>Guardado hace 5 dÃ­as</p>
                    </div>
                </div>
                <div class="saved-post-item">
                    <img src="imagenes/posts/post3.jpg" alt="Post guardado 3">
                    <div class="saved-post-info">
                        <h4>Proyecto finalizado con CSS Grid</h4>
                        <p>Guardado hace 1 semana</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL CONFIGURACIÃ“N -->
    <div id="settingsModal" class="menu-modal">
        <div class="menu-modal-content">
            <div class="menu-modal-header">
                <h2>âš™ï¸ ConfiguraciÃ³n</h2>
                <span class="menu-modal-close" onclick="closeMenuModal('settingsModal')">&times;</span>
            </div>
            <div class="menu-modal-body settings-list">
                <div class="settings-item">
                    <div class="settings-info">
                        <h4>Privacidad</h4>
                        <p>Controla quiÃ©n puede ver tu perfil</p>
                    </div>
                    <input type="checkbox" checked>
                </div>
                <div class="settings-item">
                    <div class="settings-info">
                        <h4>Notificaciones</h4>
                        <p>Recibe alertas de actividad</p>
                    </div>
                    <input type="checkbox" checked>
                </div>
                <div class="settings-item">
                    <div class="settings-info">
                        <h4>Modo oscuro</h4>
                        <p>Tema oscuro para la interfaz</p>
                    </div>
                    <input type="checkbox">
                </div>
                <div class="settings-item">
                    <div class="settings-info">
                        <h4>Actualizar perfil</h4>
                        <p>Editar informaciÃ³n personal</p>
                    </div>
                    <button class="settings-btn">Editar</button>
                </div>
                <button class="logout-btn">ğŸšª Cerrar sesiÃ³n</button>
            </div>
        </div>
    </div>

    <!-- MODALES DE COMUNIDADES -->
    
    <!-- MODAL GAMING -->
    <div id="gamingModal" class="menu-modal">
        <div class="menu-modal-content">
            <div class="menu-modal-header">
                <h2>ğŸ® Comunidad Gaming</h2>
                <span class="menu-modal-close" onclick="closeMenuModal('gamingModal')">&times;</span>
            </div>
            <div class="menu-modal-body community-content">
                <div class="community-post">
                    <h3>Ãšltimos posts de Gaming</h3>
                    <p>ğŸ“Œ Nuevo juego lanzado: The Witcher 4</p>
                    <p>ğŸ¯ Torneo de esports este fin de semana</p>
                    <p>ğŸ•¹ï¸ Review exclusivo de PlayStation 5</p>
                </div>
                <button class="join-community-btn">Unirse a Gaming</button>
            </div>
        </div>
    </div>

    <!-- MODAL FITNESS -->
    <div id="fitnessModal" class="menu-modal">
        <div class="menu-modal-content">
            <div class="menu-modal-header">
                <h2>ğŸ‹ï¸ Comunidad Fitness</h2>
                <span class="menu-modal-close" onclick="closeMenuModal('fitnessModal')">&times;</span>
            </div>
            <div class="menu-modal-body community-content">
                <div class="community-post">
                    <h3>Ãšltimos posts de Fitness</h3>
                    <p>ğŸ’ª Reto de 30 dÃ­as de entrenamiento</p>
                    <p>ğŸ¥— GuÃ­a de nutriciÃ³n y dieta saludable</p>
                    <p>ğŸƒ Entrenamientos para principiantes</p>
                </div>
                <button class="join-community-btn">Unirse a Fitness</button>
            </div>
        </div>
    </div>

    <!-- MODAL COMIDA -->
    <div id="foodModal" class="menu-modal">
        <div class="menu-modal-content">
            <div class="menu-modal-header">
                <h2>ğŸ• Comunidad Comida</h2>
                <span class="menu-modal-close" onclick="closeMenuModal('foodModal')">&times;</span>
            </div>
            <div class="menu-modal-body community-content">
                <div class="community-post">
                    <h3>Ãšltimos posts de Comida</h3>
                    <p>ğŸ– Receta: Pollo al ajillo casero</p>
                    <p>ğŸœ Mejores restaurantes de la ciudad</p>
                    <p>ğŸ¥˜ Comida internacional: Tacos mexicanos</p>
                </div>
                <button class="join-community-btn">Unirse a Comida</button>
            </div>
        </div>
    </div>

    <!-- MODAL VIAJES -->
    <div id="travelsModal" class="menu-modal">
        <div class="menu-modal-content">
            <div class="menu-modal-header">
                <h2>âœˆï¸ Comunidad Viajes</h2>
                <span class="menu-modal-close" onclick="closeMenuModal('travelsModal')">&times;</span>
            </div>
            <div class="menu-modal-body community-content">
                <div class="community-post">
                    <h3>Ãšltimos posts de Viajes</h3>
                    <p>ğŸ–ï¸ Destinos de playa para este verano</p>
                    <p>â›°ï¸ Rutas de montaÃ±ismo en SudamÃ©rica</p>
                    <p>âœˆï¸ Vuelos con descuento a Asia</p>
                </div>
                <button class="join-community-btn">Unirse a Viajes</button>
            </div>
        </div>
    </div>

    <!-- SCRIPT COMPLETO: CÃMARA, LIGHTBOX, LIKES, COMENTARIOS, PERFIL, NOTIFICACIONES Y MENSAJES -->
    <script>
        // ========== FUNCIONALIDAD DE NOTIFICACIONES ==========
        const notificationBtn = document.getElementById('notificationBtn');
        const notificationModal = document.getElementById('notificationModal');
        const notificationClose = document.querySelector('.notification-close');
        const notificationBadge = document.getElementById('notificationBadge');
        const clearNotificationsBtn = document.querySelector('.clear-notifications-btn');

        notificationBtn.addEventListener('click', () => {
            notificationModal.style.display = notificationModal.style.display === 'flex' ? 'none' : 'flex';
            if (notificationModal.style.display === 'flex') {
                notificationBadge.style.display = 'none';
            }
        });

        notificationClose.addEventListener('click', () => {
            notificationModal.style.display = 'none';
        });

        document.addEventListener('click', (e) => {
            if (!e.target.closest('.notification-modal') && !e.target.closest('#notificationBtn')) {
                notificationModal.style.display = 'none';
            }
        });

        clearNotificationsBtn.addEventListener('click', () => {
            document.getElementById('notificationList').innerHTML = '<p style="padding: 20px; text-align: center; color: #999;">No hay notificaciones</p>';
            notificationBadge.style.display = 'none';
        });

        // ========== FUNCIONALIDAD DE MENSAJES ==========
        const messageBtn = document.getElementById('messageBtn');
        const messageModal = document.getElementById('messageModal');
        const messageClose = document.querySelector('.message-close');
        const messageBadge = document.getElementById('messageBadge');
        const messageList = document.getElementById('messageList');
        const messageInput = document.getElementById('messageInput');
        const sendMessageBtn = document.getElementById('sendMessageBtn');
        const chatModal = document.getElementById('chatModal');
        const chatClose = document.querySelector('.chat-close');
        const chatMessages = document.getElementById('chatMessages');
        const chatInput = document.getElementById('chatInput');
        const sendChatBtn = document.getElementById('sendChatBtn');

        const users = [
            { id: 1, name: 'Ana MarÃ­a', image: 'imagenes/avatars/user1.jpg' },
            { id: 2, name: 'Carlos LÃ³pez', image: 'imagenes/avatars/user2.jpg' }
        ];

        const userChats = {};
        users.forEach(user => {
            userChats[user.id] = [];
        });

        messageBtn.addEventListener('click', () => {
            messageModal.style.display = messageModal.style.display === 'flex' ? 'none' : 'flex';
            if (messageModal.style.display === 'flex') {
                messageBadge.style.display = 'none';
            }
        });

        messageClose.addEventListener('click', () => {
            messageModal.style.display = 'none';
        });

        document.addEventListener('click', (e) => {
            if (!e.target.closest('.message-modal') && !e.target.closest('#messageBtn')) {
                messageModal.style.display = 'none';
            }
        });

        messageList.addEventListener('click', (e) => {
            const thread = e.target.closest('.message-thread');
            if (thread) {
                const userId = thread.dataset.userId;
                const user = users.find(u => u.id == userId);
                openChat(user);
            }
        });

        function openChat(user) {
            messageModal.style.display = 'none';
            chatModal.style.display = 'flex';
            document.getElementById('chatUserName').textContent = user.name;
            document.getElementById('chatUserImage').src = user.image;
            chatInput.dataset.userId = user.id;
            
            // Cargar mensajes previos
            chatMessages.innerHTML = '';
            if (userChats[user.id].length > 0) {
                userChats[user.id].forEach(msg => {
                    const msgDiv = document.createElement('div');
                    msgDiv.className = `chat-message ${msg.sender === 'me' ? 'my-message' : 'their-message'}`;
                    msgDiv.textContent = msg.text;
                    chatMessages.appendChild(msgDiv);
                });
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
        }

        chatClose.addEventListener('click', () => {
            chatModal.style.display = 'none';
        });

        sendMessageBtn.addEventListener('click', () => {
            if (messageInput.value.trim()) {
                const newThread = document.createElement('div');
                newThread.className = 'message-thread';
                newThread.dataset.userId = 'custom';
                newThread.innerHTML = `
                    <img src="imagenes/avatars/user4.jpg" alt="Usuario">
                    <div class="message-preview">
                        <strong>Nuevo contacto</strong>
                        <p>${messageInput.value}</p>
                    </div>
                `;
                messageList.insertBefore(newThread, messageList.lastChild);
                messageInput.value = '';
            }
        });

        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessageBtn.click();
            }
        });

        sendChatBtn.addEventListener('click', () => {
            if (chatInput.value.trim()) {
                const userId = chatInput.dataset.userId;
                const msgDiv = document.createElement('div');
                msgDiv.className = 'chat-message my-message';
                msgDiv.textContent = chatInput.value;
                chatMessages.appendChild(msgDiv);
                
                userChats[userId].push({ sender: 'me', text: chatInput.value });
                
                // Simular respuesta despuÃ©s de 1 segundo
                setTimeout(() => {
                    const responseDiv = document.createElement('div');
                    responseDiv.className = 'chat-message their-message';
                    responseDiv.textContent = 'Â¡Entendido! ğŸ˜Š';
                    chatMessages.appendChild(responseDiv);
                    userChats[userId].push({ sender: 'them', text: 'Â¡Entendido! ğŸ˜Š' });
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }, 1000);
                
                chatMessages.scrollTop = chatMessages.scrollHeight;
                chatInput.value = '';
            }
        });

        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendChatBtn.click();
            }
        });

        // ========== FUNCIONALIDAD DE PERFIL ==========
        const profileModal = document.getElementById('profileModal');
        const profileClose = document.querySelector('.profile-close');
        const clickableProfiles = document.querySelectorAll('.clickable-profile');
        const clickableNames = document.querySelectorAll('.clickable-profile-name');

        function openProfile(userName, userBio) {
            document.getElementById('profileName').textContent = userName;
            document.getElementById('profileBio').textContent = userBio;
            document.getElementById('postCount').textContent = Math.floor(Math.random() * 100) + 50;
            document.getElementById('followerCount').textContent = Math.floor(Math.random() * 10000) + 1000;
            document.getElementById('followingCount').textContent = Math.floor(Math.random() * 5000) + 500;
            profileModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        clickableProfiles.forEach(profile => {
            profile.addEventListener('click', (e) => {
                e.stopPropagation();
                const userName = profile.dataset.user || 'Usuario';
                const userBio = profile.dataset.bio || 'Sin biografÃ­a';
                openProfile(userName, userBio);
            });
        });

        clickableNames.forEach(name => {
            name.addEventListener('click', (e) => {
                e.stopPropagation();
                const userName = name.dataset.user || 'Usuario';
                const userBio = name.parentElement.parentElement.querySelector('.post-header img').dataset.bio || 'Sin biografÃ­a';
                openProfile(userName, userBio);
            });
        });

        profileClose.addEventListener('click', () => {
            profileModal.style.display = 'none';
            document.body.style.overflow = 'auto';
        });

        // BotÃ³n de perfil en el header
        const profileIconBtn = document.getElementById('profileIconBtn');
        if (profileIconBtn) {
            profileIconBtn.addEventListener('click', () => {
                openProfile('Jhon Espinosa', 'Desarrollador Web | Entusiasta de CSS');
            });
        }

        profileModal.addEventListener('click', (e) => {
            if (e.target === profileModal) {
                profileModal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        });

        // ========== FUNCIONALIDAD DE LIKES ==========
        const likeBtns = document.querySelectorAll('.like-btn');
        const likesData = {};

        likeBtns.forEach(btn => {
            const post = btn.closest('.post');
            const postId = post.dataset.postId;
            likesData[postId] = { liked: false, count: parseInt(post.dataset.likes) || 0 };

            btn.addEventListener('click', (e) => {
                e.preventDefault();
                const liked = likesData[postId].liked;

                if (!liked) {
                    likesData[postId].liked = true;
                    likesData[postId].count++;
                    btn.classList.add('active');
                    btn.textContent = 'â¤ï¸ Me gusta';
                } else {
                    likesData[postId].liked = false;
                    likesData[postId].count--;
                    btn.classList.remove('active');
                    btn.textContent = 'ğŸ‘ Me gusta';
                }

                const likeCount = post.querySelector('.like-count');
                likeCount.textContent = `ğŸ‘ ${likesData[postId].count} me gusta`;
            });
        });

        // ========== FUNCIONALIDAD DE COMENTARIOS ==========
        const commentBtns = document.querySelectorAll('.comment-btn');
        const commentFields = document.querySelectorAll('.comment-field');

        commentBtns.forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.preventDefault();
                const post = btn.closest('.post');
                const commentsSection = post.querySelector('.comments-section');
                const isOpen = commentsSection.style.display !== 'none';

                if (isOpen) {
                    commentsSection.style.display = 'none';
                    btn.textContent = 'ğŸ’¬ Comentar';
                } else {
                    commentsSection.style.display = 'block';
                    btn.textContent = 'ğŸ”½ Cerrar comentarios';
                    post.querySelector('.comment-field').focus();
                }
            });
        });

        commentFields.forEach(field => {
            field.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && field.value.trim()) {
                    addComment(field);
                }
            });
        });

        function addComment(field) {
            const commentText = field.value.trim();
            if (!commentText) return;

            const post = field.closest('.post');
            const commentSection = post.querySelector('.comments-section');
            const postId = post.dataset.postId;

            const newComment = document.createElement('div');
            newComment.className = 'comment';
            newComment.innerHTML = `
                <img src="imagenes/WhatsApp Image 2026-02-09 at 19.18.27.jpeg" alt="Tu foto" class="comment-pic">
                <div class="comment-content">
                    <strong>TÃº (Jhon Espinosa)</strong>
                    <p>${commentText}</p>
                    <span class="comment-time">justo ahora</span>
                </div>
            `;

            commentSection.insertBefore(newComment, commentSection.querySelector('.comment-input'));

            // Actualizar contador
            const commentCount = post.querySelector('.comment-count');
            const currentCount = parseInt(commentCount.textContent.match(/\\d+/)[0]) || 0;
            commentCount.textContent = `ğŸ’¬ ${currentCount + 1} comentarios`;

            field.value = '';
        }

        // ========== FUNCIONALIDAD DE CÃMARA ==========
        const cameraModal = document.getElementById('cameraModal');
        const cameraStream = document.getElementById('cameraStream');
        const photoCanvas = document.getElementById('photoCanvas');
        const cameraClose = document.querySelector('.camera-close');
        const cameraBtn = document.getElementById('cameraBtn');
        const captureBtn = document.getElementById('captureBtn');
        const retakeBtn = document.getElementById('retakeBtn');
        const usePhotoBtn = document.getElementById('usePhotoBtn');
        const galleryBtn = document.getElementById('galleryBtn');
        const galleryInput = document.getElementById('galleryInput');
        const postText = document.getElementById('postText');

        let stream = null;
        let capturedImage = null;
        let ctx = photoCanvas.getContext('2d');

        cameraBtn.addEventListener('click', async () => {
            try {
                stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: 'environment', width: { ideal: 1280 }, height: { ideal: 720 } }
                });
                cameraStream.srcObject = stream;
                cameraModal.style.display = 'flex';
                captureBtn.style.display = 'block';
                retakeBtn.style.display = 'none';
                usePhotoBtn.style.display = 'none';
                postText.value = '';
            } catch (error) {
                console.error('Error accediendo a cÃ¡mara:', error);
                alert('No se pudo acceder a la cÃ¡mara. Detalles: ' + error.message);
            }
        });

        captureBtn.addEventListener('click', () => {
            photoCanvas.width = cameraStream.videoWidth;
            photoCanvas.height = cameraStream.videoHeight;
            ctx.drawImage(cameraStream, 0, 0);
            
            capturedImage = photoCanvas.toDataURL('image/jpeg', 0.9);
            
            cameraStream.style.display = 'none';
            photoCanvas.style.display = 'block';
            
            captureBtn.style.display = 'none';
            retakeBtn.style.display = 'block';
            usePhotoBtn.style.display = 'block';
        });

        retakeBtn.addEventListener('click', () => {
            cameraStream.style.display = 'block';
            photoCanvas.style.display = 'none';
            captureBtn.style.display = 'block';
            retakeBtn.style.display = 'none';
            usePhotoBtn.style.display = 'none';
            ctx.clearRect(0, 0, photoCanvas.width, photoCanvas.height);
        });

        usePhotoBtn.addEventListener('click', () => {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
            }
            cameraModal.style.display = 'none';
            cameraStream.style.display = 'block';
            photoCanvas.style.display = 'none';
            
            createPostWithPhoto(capturedImage);
        });

        cameraClose.addEventListener('click', () => {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
            }
            cameraModal.style.display = 'none';
            cameraStream.style.display = 'block';
            photoCanvas.style.display = 'none';
            captureBtn.style.display = 'block';
            retakeBtn.style.display = 'none';
            usePhotoBtn.style.display = 'none';
        });

        galleryBtn.addEventListener('click', () => {
            galleryInput.click();
        });

        galleryInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (event) => {
                    createPostWithPhoto(event.target.result);
                };
                reader.readAsDataURL(file);
            }
        });

        function createPostWithPhoto(imageDataUrl) {
            const postContent = postText.value || 'Â¡Compartiendo mi momento! ğŸ“¸';

            const newPost = document.createElement('article');
            newPost.className = 'post';
            newPost.dataset.postId = Math.random().toString(36).substr(2, 9);
            newPost.dataset.likes = 0;
            newPost.innerHTML = `
                <div class="post-header">
                    <img src="imagenes/WhatsApp Image 2026-02-09 at 19.18.27.jpeg" alt="Tu perfil" class="profile-pic-small clickable-profile" data-user="Jhon Espinosa" data-bio="Desarrollador Web">
                    <div class="post-info">
                        <h4 class="clickable-profile-name" data-user="Jhon Espinosa">Jhon Espinosa</h4>
                        <span class="post-time">ahora</span>
                    </div>
                    <span class="post-menu">â‹¯</span>
                </div>
                
                <div class="post-content">
                    <p>${postContent}</p>
                </div>

                <img src="${imageDataUrl}" alt="Foto capturada" class="post-image clickable-image">

                <div class="post-stats">
                    <span class="like-count">ğŸ‘ 0 me gusta</span>
                    <span class="comment-count">ğŸ’¬ 0 comentarios</span>
                    <span>â†—ï¸ 0 compartidos</span>
                </div>

                <div class="post-actions-footer">
                    <button class="action-btn like-btn" data-liked="false">ğŸ‘ Me gusta</button>
                    <button class="action-btn comment-btn">ğŸ’¬ Comentar</button>
                    <button class="action-btn">â†—ï¸ Compartir</button>
                </div>

                <div class="comments-section" style="display: none;"></div>

                <div class="comment-input">
                    <img src="imagenes/WhatsApp Image 2026-02-09 at 19.18.27.jpeg" alt="Tu foto" class="comment-pic">
                    <input type="text" placeholder="Escribe un comentario..." class="comment-field">
                </div>
            `;

            const feed = document.querySelector('.feed');
            const createPost = feed.querySelector('.create-post');
            feed.insertBefore(newPost, createPost.nextSibling);

            // Agregar event listeners al nuevo post
            const newLikeBtn = newPost.querySelector('.like-btn');
            const newCommentBtn = newPost.querySelector('.comment-btn');
            const newCommentField = newPost.querySelector('.comment-field');
            const newProfilePics = newPost.querySelectorAll('.clickable-profile');
            const newProfileName = newPost.querySelector('.clickable-profile-name');

            likesData[newPost.dataset.postId] = { liked: false, count: 0 };

            newLikeBtn.addEventListener('click', function(e) {
                e.preventDefault();
                const postId = newPost.dataset.postId;
                const liked = likesData[postId].liked;

                if (!liked) {
                    likesData[postId].liked = true;
                    likesData[postId].count++;
                    this.classList.add('active');
                    this.textContent = 'â¤ï¸ Me gusta';
                } else {
                    likesData[postId].liked = false;
                    likesData[postId].count--;
                    this.classList.remove('active');
                    this.textContent = 'ğŸ‘ Me gusta';
                }

                newPost.querySelector('.like-count').textContent = `ğŸ‘ ${likesData[postId].count} me gusta`;
            });

            newCommentBtn.addEventListener('click', (e) => {
                e.preventDefault();
                const commentsSection = newPost.querySelector('.comments-section');
                const isOpen = commentsSection.style.display !== 'none';

                if (isOpen) {
                    commentsSection.style.display = 'none';
                    newCommentBtn.textContent = 'ğŸ’¬ Comentar';
                } else {
                    commentsSection.style.display = 'block';
                    newCommentBtn.textContent = 'ğŸ”½ Cerrar comentarios';
                    newCommentField.focus();
                }
            });

            newCommentField.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && newCommentField.value.trim()) {
                    addComment(newCommentField);
                }
            });

            newProfilePics.forEach(pic => {
                pic.addEventListener('click', (e) => {
                    e.stopPropagation();
                    openProfile('Jhon Espinosa', 'Desarrollador Web');
                });
            });

            newProfileName.addEventListener('click', (e) => {
                e.stopPropagation();
                openProfile('Jhon Espinosa', 'Desarrollador Web');
            });

            postText.value = '';
            alert('Â¡Post publicado exitosamente! ğŸ‰');
        }

        // ========== FUNCIONALIDAD LIGHTBOX ==========
        const modal = document.getElementById('imageModal');
        const modalImage = document.querySelector('.modal-image');
        const closeBtn = document.querySelector('.modal-close');
        const prevBtn = document.querySelector('.modal-prev');
        const nextBtn = document.querySelector('.modal-next');
        const clickableImages = document.querySelectorAll('.clickable-image');
        
        let currentImageIndex = 0;
        let images = [];

        function handleImageError(img) {
            console.warn('Error cargando imagen:', img.src);
            img.style.display = 'none';
        }

        function initImages() {
            images = Array.from(clickableImages)
                .filter(img => img.offsetHeight > 0)
                .map(img => ({
                    src: img.src,
                    alt: img.alt,
                    element: img
                }));
        }

        function preloadImage(src) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                img.onload = () => resolve(src);
                img.onerror = () => reject(new Error('Error cargando: ' + src));
                img.src = src;
            });
        }

        clickableImages.forEach((img, index) => {
            img.style.cursor = 'pointer';
            img.addEventListener('click', async (e) => {
                e.stopPropagation();
                
                const imgIndex = images.findIndex(item => item.element === img);
                if (imgIndex === -1) return;
                
                currentImageIndex = imgIndex;
                
                try {
                    await preloadImage(images[currentImageIndex].src);
                    modalImage.src = images[currentImageIndex].src;
                    modalImage.alt = images[currentImageIndex].alt;
                    modal.style.display = 'flex';
                    document.body.style.overflow = 'hidden';
                } catch (error) {
                    console.error('No se pudo abrir la imagen:', error);
                }
            });
            
            img.addEventListener('error', () => handleImageError(img));
        });

        closeBtn.addEventListener('click', () => {
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        });

        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        });

        async function nextImage() {
            if (images.length === 0) return;
            currentImageIndex = (currentImageIndex + 1) % images.length;
            try {
                await preloadImage(images[currentImageIndex].src);
                modalImage.src = images[currentImageIndex].src;
                modalImage.alt = images[currentImageIndex].alt;
            } catch (error) {
                console.error('Error navegando:', error);
            }
        }

        async function prevImage() {
            if (images.length === 0) return;
            currentImageIndex = (currentImageIndex - 1 + images.length) % images.length;
            try {
                await preloadImage(images[currentImageIndex].src);
                modalImage.src = images[currentImageIndex].src;
                modalImage.alt = images[currentImageIndex].alt;
            } catch (error) {
                console.error('Error navegando:', error);
            }
        }

        nextBtn.addEventListener('click', nextImage);
        prevBtn.addEventListener('click', prevImage);

        document.addEventListener('keydown', (e) => {
            if (modal.style.display === 'flex') {
                if (e.key === 'ArrowRight') nextImage();
                if (e.key === 'ArrowLeft') prevImage();
                if (e.key === 'Escape') closeBtn.click();
            }
        });

        modalImage.addEventListener('error', () => {
            modalImage.src = 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="600" height="400"%3E%3Crect fill="%23cccccc" width="600" height="400"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%23666" font-size="20"%3EImagen no disponible%3C/text%3E%3C/svg%3E';
        });

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initImages);
        } else {
            initImages();
        }

        window.addEventListener('load', initImages);

        // ========== FUNCIONALIDAD DEL MENÃš ==========
        const menuItems = document.querySelectorAll('.menu-item');

        // Mapeo de items del menÃº a modales
        const menuToModal = {
            'Inicio': null, // No abre modal, solo navega
            'ğŸ“° Inicio': null,
            'Amigos': 'friendsModal',
            'ğŸ‘¥ Amigos': 'friendsModal',
            'Fotos': 'photosModal',
            'ğŸ“¸ Fotos': 'photosModal',
            'Guardados': 'savedModal',
            'ğŸ’¾ Guardados': 'savedModal',
            'ConfiguraciÃ³n': 'settingsModal',
            'âš™ï¸ ConfiguraciÃ³n': 'settingsModal',
            'Gaming': 'gamingModal',
            'ğŸ® Gaming': 'gamingModal',
            'Fitness': 'fitnessModal',
            'ğŸ‹ï¸ Fitness': 'fitnessModal',
            'Comida': 'foodModal',
            'ğŸ• Comida': 'foodModal',
            'Viajes': 'travelsModal',
            'âœˆï¸ Viajes': 'travelsModal'
        };

        menuItems.forEach(item => {
            item.addEventListener('click', (e) => {
                e.preventDefault();
                
                // Remover clase active de todos los items
                menuItems.forEach(m => m.classList.remove('active'));
                
                // Agregar clase active al item clickeado
                item.classList.add('active');
                
                // Obtener el texto completo del item
                const itemText = item.textContent.trim();
                
                // Encontrar el modal correspondiente
                let modalId = null;
                
                // Buscar por coincidencia exacta primero
                for (const key in menuToModal) {
                    if (itemText.includes(key.replace('ğŸ“° ', '').replace('ğŸ‘¥ ', '').replace('ğŸ“¸ ', '').replace('ğŸ’¾ ', '').replace('âš™ï¸ ', '').replace('ğŸ® ', '').replace('ğŸ‹ï¸ ', '').replace('ğŸ• ', '').replace('âœˆï¸ ', ''))) {
                        modalId = menuToModal[key];
                        break;
                    }
                }
                
                // Si es Inicio, solo mostrar feed
                if (itemText.includes('Inicio') || itemText.includes('ğŸ“°')) {
                    document.querySelectorAll('.menu-modal').forEach(m => m.style.display = 'none');
                    return;
                }
                
                // Si hay un modal correspondiente, abrirlo
                if (modalId) {
                    closeAllMenuModals();
                    const modal = document.getElementById(modalId);
                    if (modal) {
                        modal.style.display = 'flex';
                    }
                }
            });
        });

        // FunciÃ³n para cerrar todos los modales del menÃº
        function closeAllMenuModals() {
            const modals = document.querySelectorAll('.menu-modal');
            modals.forEach(m => m.style.display = 'none');
        }

        // FunciÃ³n para cerrar un modal especÃ­fico
        function closeMenuModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'none';
            }
        }

        // Cerrar modales al hacer click fuera de ellos
        document.addEventListener('click', (e) => {
            const modals = document.querySelectorAll('.menu-modal');
            modals.forEach(modal => {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            });
        });

        // Funcionalidad de botones dentro de los modales
        document.querySelectorAll('.friend-action-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                alert('Perfil del amigo abierto');
            });
        });

        document.querySelectorAll('.join-community-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                alert('Â¡A unido a esta comunidad! ğŸ‰');
            });
        });

        document.querySelector('.logout-btn').addEventListener('click', () => {
            if (confirm('Â¿Deseas cerrar sesiÃ³n?')) {
                alert('SesiÃ³n cerrada. Â¡Hasta pronto!');
            }
        });

        // ========== FUNCIONALIDAD DE AGREGAR AMIGOS ==========
        const addFriendBtns = document.querySelectorAll('.add-friend-btn');
        let addedFriends = JSON.parse(localStorage.getItem('addedFriends')) || [];

        function updateFriendsCount() {
            const friendsModal = document.getElementById('friendsModal');
            if (friendsModal) {
                const friendCount = addedFriends.length;
                const header = friendsModal.querySelector('.menu-modal-header h2');
                if (header) {
                    header.textContent = `ğŸ‘¥ Mis Amigos (${friendCount})`;
                }
            }
        }

        // Actualizar contador al cargar
        updateFriendsCount();

        addFriendBtns.forEach(btn => {
            const suggestion = btn.closest('.suggestion');
            const friendId = suggestion.dataset.friendId;
            const friendName = suggestion.dataset.friendName;
            const friendImage = suggestion.dataset.friendImage;
            const friendBio = suggestion.dataset.friendBio;

            // Verificar si ya fue agregado
            const alreadyAdded = addedFriends.some(f => f.id == friendId);
            if (alreadyAdded) {
                btn.textContent = 'âœ“ Amigo';
                btn.disabled = true;
                btn.style.opacity = '0.5';
                btn.style.cursor = 'default';
            }

            btn.addEventListener('click', () => {
                if (btn.textContent === 'âœ“ Amigo') return;

                // Agregar amigo
                const newFriend = {
                    id: friendId,
                    name: friendName,
                    image: friendImage,
                    bio: friendBio
                };

                addedFriends.push(newFriend);
                localStorage.setItem('addedFriends', JSON.stringify(addedFriends));

                // Actualizar botÃ³n
                btn.textContent = 'âœ“ Amigo';
                btn.disabled = true;
                btn.style.opacity = '0.5';
                btn.style.cursor = 'default';

                // Actualizar modal de amigos
                addFriendToModal(newFriend);

                // Actualizar contador
                updateFriendsCount();

                // Mostrar notificaciÃ³n
                alert(`Â¡${friendName} ha sido agregado a tus amigos! ğŸ‰`);
            });
        });

        // FunciÃ³n para agregar amigo al modal
        function addFriendToModal(friend) {
            const friendsList = document.getElementById('friendsList');
            
            // Verificar si ya existe
            const exists = friendsList.querySelector(`[data-friend-id="${friend.id}"]`);
            if (exists) return;

            const friendItem = document.createElement('div');
            friendItem.className = 'friend-item';
            friendItem.dataset.friendId = friend.id;
            friendItem.innerHTML = `
                <img src="${friend.image}" alt="${friend.name}">
                <div class="friend-info">
                    <h4>${friend.name}</h4>
                    <p>${friend.bio}</p>
                </div>
                <button class="friend-action-btn remove-friend-btn" data-friend-id="${friend.id}">Remover</button>
            `;

            friendsList.insertBefore(friendItem, friendsList.firstChild);

            // Agregar listener al botÃ³n de remover
            const removeBtn = friendItem.querySelector('.remove-friend-btn');
            removeBtn.addEventListener('click', (e) => {
                e.preventDefault();
                removeFriend(friend.id, friend.name);
            });
        }

        // FunciÃ³n para remover amigo
        function removeFriend(friendId, friendName) {
            // Remover de la lista global
            addedFriends = addedFriends.filter(f => f.id != friendId);
            localStorage.setItem('addedFriends', JSON.stringify(addedFriends));

            // Remover del DOM (modal)
            const friendsList = document.getElementById('friendsList');
            const friendItem = friendsList.querySelector(`[data-friend-id="${friendId}"]`);
            if (friendItem) {
                friendItem.remove();
            }

            // Actualizar botÃ³n de sugerencia
            const suggestionBtn = document.querySelector(`.add-friend-btn[data-friend-id="${friendId}"]`);
            if (suggestionBtn) {
                suggestionBtn.textContent = '+';
                suggestionBtn.disabled = false;
                suggestionBtn.style.opacity = '1';
                suggestionBtn.style.cursor = 'pointer';
            }

            // Actualizar contador
            updateFriendsCount();

            // Mostrar notificaciÃ³n
            alert(`${friendName} ha sido removido de tus amigos.`);
        }

        // Cargar amigos agregados al iniciar
        addedFriends.forEach(friend => {
            addFriendToModal(friend);
        });

        document.querySelectorAll('.settings-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                alert('Editar perfil abierto');
            });
        });

        window.addEventListener('beforeunload', () => {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
            }
        });
    </script>
</body>
</html>
